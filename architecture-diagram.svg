<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1400" style="background-color: #f8f9fa;">
  <!-- Title -->
  <text x="600" y="40" font-size="32" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    EduTrack System Architecture
  </text>
  
  <!-- Client Layer -->
  <g id="client-layer">
    <rect x="50" y="80" width="1100" height="220" fill="#e3f2fd" stroke="#1976d2" stroke-width="3" rx="10"/>
    <text x="600" y="110" font-size="24" font-weight="bold" text-anchor="middle" fill="#1976d2">
      CLIENT LAYER
    </text>
    
    <!-- Frontend -->
    <rect x="100" y="130" width="1000" height="150" fill="#ffffff" stroke="#1976d2" stroke-width="2" rx="8"/>
    <text x="600" y="160" font-size="20" font-weight="bold" text-anchor="middle" fill="#0d47a1">
      Next.js 14 Frontend (TypeScript + React)
    </text>
    
    <text x="150" y="190" font-size="14" fill="#424242">• App Router (Server &amp; Client Components)</text>
    <text x="150" y="210" font-size="14" fill="#424242">• Tailwind CSS for Styling</text>
    <text x="150" y="230" font-size="14" fill="#424242">• Context API for State Management</text>
    <text x="150" y="250" font-size="14" fill="#424242">• Responsive Design (Mobile-First)</text>
    
    <text x="650" y="190" font-size="14" fill="#424242">Pages: / | /login | /register</text>
    <text x="650" y="210" font-size="14" fill="#424242">/dashboard | /grades</text>
    <text x="650" y="230" font-size="14" fill="#424242">Components: Navbar, AssignmentCard</text>
    <text x="650" y="250" font-size="14" fill="#424242">FileUploadForm, AuthContext</text>
  </g>
  
  <!-- Connection Arrow -->
  <line x1="600" y1="300" x2="600" y2="360" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="650" y="340" font-size="16" font-weight="bold" fill="#d32f2f">HTTP/REST API</text>
  <text x="650" y="358" font-size="14" fill="#666">(JSON + FormData)</text>
  
  <!-- Application Layer -->
  <g id="app-layer">
    <rect x="50" y="370" width="1100" height="280" fill="#fff3e0" stroke="#f57c00" stroke-width="3" rx="10"/>
    <text x="600" y="400" font-size="24" font-weight="bold" text-anchor="middle" fill="#f57c00">
      APPLICATION LAYER
    </text>
    
    <!-- Backend -->
    <rect x="100" y="420" width="1000" height="210" fill="#ffffff" stroke="#f57c00" stroke-width="2" rx="8"/>
    <text x="600" y="450" font-size="20" font-weight="bold" text-anchor="middle" fill="#e65100">
      Express.js API Server (Node.js)
    </text>
    
    <g id="backend-components">
      <!-- Routes -->
      <rect x="120" y="470" width="200" height="140" fill="#ffe0b2" stroke="#f57c00" stroke-width="1" rx="5"/>
      <text x="220" y="490" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">Routes</text>
      <text x="130" y="510" font-size="12" fill="#424242">• /api/auth</text>
      <text x="130" y="530" font-size="12" fill="#424242">  - POST /register</text>
      <text x="130" y="550" font-size="12" fill="#424242">  - POST /login</text>
      <text x="130" y="570" font-size="12" fill="#424242">• /api/assignments</text>
      <text x="130" y="590" font-size="12" fill="#424242">• /api/submissions</text>
      
      <!-- Controllers -->
      <rect x="340" y="470" width="200" height="140" fill="#ffe0b2" stroke="#f57c00" stroke-width="1" rx="5"/>
      <text x="440" y="490" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">Controllers</text>
      <text x="350" y="510" font-size="12" fill="#424242">• auth.js</text>
      <text x="350" y="530" font-size="12" fill="#424242">  - Register</text>
      <text x="350" y="550" font-size="12" fill="#424242">  - Login</text>
      <text x="350" y="570" font-size="12" fill="#424242">• assignment.js</text>
      <text x="350" y="590" font-size="12" fill="#424242">• submission.js</text>
      
      <!-- Middleware -->
      <rect x="560" y="470" width="200" height="140" fill="#ffe0b2" stroke="#f57c00" stroke-width="1" rx="5"/>
      <text x="660" y="490" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">Middleware</text>
      <text x="570" y="510" font-size="12" fill="#424242">• JWT Verification</text>
      <text x="570" y="530" font-size="12" fill="#424242">• RBAC (Role Check)</text>
      <text x="570" y="550" font-size="12" fill="#424242">• Input Validation</text>
      <text x="570" y="570" font-size="12" fill="#424242">• File Upload (Multer)</text>
      <text x="570" y="590" font-size="12" fill="#424242">• Security (Helmet)</text>
      
      <!-- Models -->
      <rect x="780" y="470" width="200" height="140" fill="#ffe0b2" stroke="#f57c00" stroke-width="1" rx="5"/>
      <text x="880" y="490" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">Models (Sequelize)</text>
      <text x="790" y="510" font-size="12" fill="#424242">• User</text>
      <text x="790" y="530" font-size="12" fill="#424242">  - Teacher/Student</text>
      <text x="790" y="550" font-size="12" fill="#424242">• Assignment</text>
      <text x="790" y="570" font-size="12" fill="#424242">• Submission</text>
      <text x="790" y="590" font-size="12" fill="#424242">• Associations</text>
    </g>
  </g>
  
  <!-- Connection Arrow to Database -->
  <line x1="600" y1="650" x2="600" y2="710" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="650" y="685" font-size="16" font-weight="bold" fill="#388e3c">ORM (Sequelize)</text>
  
  <!-- Data Layer -->
  <g id="data-layer">
    <rect x="50" y="720" width="1100" height="260" fill="#e8f5e9" stroke="#388e3c" stroke-width="3" rx="10"/>
    <text x="600" y="750" font-size="24" font-weight="bold" text-anchor="middle" fill="#388e3c">
      DATA LAYER
    </text>
    
    <!-- Database -->
    <rect x="100" y="770" width="1000" height="190" fill="#ffffff" stroke="#388e3c" stroke-width="2" rx="8"/>
    <text x="600" y="800" font-size="20" font-weight="bold" text-anchor="middle" fill="#1b5e20">
      MySQL Database
    </text>
    
    <!-- Database Tables -->
    <g id="db-tables">
      <!-- Users Table -->
      <rect x="150" y="820" width="250" height="120" fill="#c8e6c9" stroke="#388e3c" stroke-width="1" rx="5"/>
      <text x="275" y="840" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">USER Table</text>
      <text x="160" y="860" font-size="11" fill="#424242">• id (PK)</text>
      <text x="160" y="878" font-size="11" fill="#424242">• name</text>
      <text x="160" y="896" font-size="11" fill="#424242">• email (unique)</text>
      <text x="160" y="914" font-size="11" fill="#424242">• password_hash</text>
      <text x="160" y="932" font-size="11" fill="#424242">• role (teacher/student)</text>
      
      <!-- Assignments Table -->
      <rect x="430" y="820" width="250" height="120" fill="#c8e6c9" stroke="#388e3c" stroke-width="1" rx="5"/>
      <text x="555" y="840" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">ASSIGNMENT Table</text>
      <text x="440" y="860" font-size="11" fill="#424242">• id (PK)</text>
      <text x="440" y="878" font-size="11" fill="#424242">• title</text>
      <text x="440" y="896" font-size="11" fill="#424242">• description</text>
      <text x="440" y="914" font-size="11" fill="#424242">• due_date</text>
      <text x="440" y="932" font-size="11" fill="#424242">• teacher_id (FK → user.id)</text>
      
      <!-- Submissions Table -->
      <rect x="710" y="820" width="250" height="120" fill="#c8e6c9" stroke="#388e3c" stroke-width="1" rx="5"/>
      <text x="835" y="840" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">SUBMISSION Table</text>
      <text x="720" y="860" font-size="11" fill="#424242">• id (PK)</text>
      <text x="720" y="878" font-size="11" fill="#424242">• file_path</text>
      <text x="720" y="896" font-size="11" fill="#424242">• grade, feedback</text>
      <text x="720" y="914" font-size="11" fill="#424242">• student_id (FK → user.id)</text>
      <text x="720" y="932" font-size="11" fill="#424242">• assignment_id (FK)</text>
    </g>
  </g>
  
  <!-- File Storage Layer -->
  <g id="storage-layer">
    <rect x="50" y="1010" width="1100" height="180" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="3" rx="10"/>
    <text x="600" y="1040" font-size="24" font-weight="bold" text-anchor="middle" fill="#7b1fa2">
      FILE STORAGE LAYER
    </text>
    
    <rect x="100" y="1060" width="1000" height="110" fill="#ffffff" stroke="#7b1fa2" stroke-width="2" rx="8"/>
    <text x="600" y="1090" font-size="20" font-weight="bold" text-anchor="middle" fill="#4a148c">
      Local File System
    </text>
    
    <text x="150" y="1120" font-size="14" fill="#424242">• Path: /backend/uploads/</text>
    <text x="150" y="1140" font-size="14" fill="#424242">• Static file serving via Express</text>
    <text x="150" y="1160" font-size="14" fill="#424242">• Max file size: 10MB</text>
    
    <text x="600" y="1120" font-size="14" fill="#424242">• Unique filenames: timestamp-original.ext</text>
    <text x="600" y="1140" font-size="14" fill="#424242">• Multer middleware for uploads</text>
    <text x="600" y="1160" font-size="14" fill="#424242">• Accessible via: /uploads/{filename}</text>
  </g>
  
  <!-- Authentication Flow Box -->
  <g id="auth-flow">
    <rect x="50" y="1220" width="550" height="150" fill="#fff8e1" stroke="#f57f17" stroke-width="2" rx="8"/>
    <text x="325" y="1245" font-size="18" font-weight="bold" text-anchor="middle" fill="#f57f17">
      Authentication Flow
    </text>
    
    <text x="70" y="1270" font-size="13" fill="#424242">1. User submits credentials to /api/auth/login</text>
    <text x="70" y="1290" font-size="13" fill="#424242">2. Backend validates &amp; compares bcrypt hash</text>
    <text x="70" y="1310" font-size="13" fill="#424242">3. JWT token generated (expires in 2 hours)</text>
    <text x="70" y="1330" font-size="13" fill="#424242">4. Token stored in localStorage</text>
    <text x="70" y="1350" font-size="13" fill="#424242">5. All protected API calls include: Authorization: Bearer {token}</text>
  </g>
  
  <!-- Data Flow Box -->
  <g id="data-flow">
    <rect x="620" y="1220" width="530" height="150" fill="#fce4ec" stroke="#c2185b" stroke-width="2" rx="8"/>
    <text x="885" y="1245" font-size="18" font-weight="bold" text-anchor="middle" fill="#c2185b">
      Key Data Relationships
    </text>
    
    <text x="640" y="1270" font-size="13" fill="#424242">• User (1) → (N) Assignment (as teacher)</text>
    <text x="640" y="1290" font-size="13" fill="#424242">• User (1) → (N) Submission (as student)</text>
    <text x="640" y="1310" font-size="13" fill="#424242">• Assignment (1) → (N) Submission</text>
    <text x="640" y="1330" font-size="13" fill="#424242">• CASCADE DELETE on all foreign keys</text>
    <text x="640" y="1350" font-size="13" fill="#424242">• Referential integrity enforced at DB level</text>
  </g>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <g id="legend">
    <text x="100" y="1385" font-size="12" font-style="italic" fill="#666">
      Technology Stack: Next.js 14 | React 18 | TypeScript | Tailwind CSS | Express.js | Node.js | Sequelize | MySQL | JWT | Bcrypt
    </text>
  </g>
</svg>
