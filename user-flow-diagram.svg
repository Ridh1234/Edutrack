<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1000" style="background-color: #fafafa;">
  <!-- Title -->
  <text x="700" y="40" font-size="32" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    EduTrack - User Flow Diagram
  </text>
  
  <!-- User Registration Flow -->
  <g id="registration-flow">
    <text x="200" y="90" font-size="20" font-weight="bold" fill="#1976d2">
      1. User Registration Flow
    </text>
    
    <rect x="50" y="110" width="150" height="60" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5"/>
    <text x="125" y="140" font-size="14" font-weight="bold" text-anchor="middle" fill="#0d47a1">Browser</text>
    <text x="125" y="157" font-size="11" text-anchor="middle" fill="#424242">/register page</text>
    
    <line x1="200" y1="140" x2="270" y2="140" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="235" y="130" font-size="10" text-anchor="middle" fill="#d32f2f">POST</text>
    
    <rect x="270" y="110" width="180" height="60" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5"/>
    <text x="360" y="135" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">Backend API</text>
    <text x="360" y="152" font-size="11" text-anchor="middle" fill="#424242">/api/auth/register</text>
    
    <line x1="450" y1="140" x2="520" y2="140" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    
    <rect x="520" y="110" width="150" height="60" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
    <text x="595" y="140" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">Database</text>
    <text x="595" y="157" font-size="11" text-anchor="middle" fill="#424242">CREATE user</text>
    
    <text x="80" y="200" font-size="11" fill="#666">1. Fill form</text>
    <text x="285" y="200" font-size="11" fill="#666">2. Validate input</text>
    <text x="285" y="215" font-size="11" fill="#666">3. Hash password</text>
    <text x="530" y="200" font-size="11" fill="#666">4. Store user</text>
  </g>
  
  <!-- Login Flow -->
  <g id="login-flow">
    <text x="200" y="270" font-size="20" font-weight="bold" fill="#1976d2">
      2. Authentication Flow
    </text>
    
    <rect x="50" y="290" width="150" height="60" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5"/>
    <text x="125" y="320" font-size="14" font-weight="bold" text-anchor="middle" fill="#0d47a1">Browser</text>
    <text x="125" y="337" font-size="11" text-anchor="middle" fill="#424242">/login page</text>
    
    <line x1="200" y1="320" x2="270" y2="320" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="235" y="310" font-size="10" text-anchor="middle" fill="#d32f2f">Credentials</text>
    
    <rect x="270" y="290" width="180" height="60" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5"/>
    <text x="360" y="315" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">Backend API</text>
    <text x="360" y="332" font-size="11" text-anchor="middle" fill="#424242">/api/auth/login</text>
    
    <line x1="450" y1="320" x2="520" y2="320" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    
    <rect x="520" y="290" width="150" height="60" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
    <text x="595" y="320" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">Database</text>
    <text x="595" y="337" font-size="11" text-anchor="middle" fill="#424242">FIND user</text>
    
    <line x1="520" y1="330" x2="450" y2="330" stroke="#388e3c" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="270" y1="335" x2="200" y2="335" stroke="#1976d2" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="360" y="375" font-size="10" text-anchor="middle" fill="#388e3c">JWT Token</text>
    
    <text x="60" y="380" font-size="11" fill="#666">5. Store in localStorage</text>
    <text x="60" y="395" font-size="11" fill="#666">6. Redirect to dashboard</text>
  </g>
  
  <!-- Teacher Flow -->
  <g id="teacher-flow">
    <text x="200" y="450" font-size="20" font-weight="bold" fill="#7b1fa2">
      3. Teacher Flow - Create Assignment
    </text>
    
    <rect x="50" y="470" width="150" height="80" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="5"/>
    <text x="125" y="495" font-size="14" font-weight="bold" text-anchor="middle" fill="#4a148c">Teacher</text>
    <text x="125" y="512" font-size="11" text-anchor="middle" fill="#424242">/dashboard</text>
    <text x="125" y="535" font-size="10" text-anchor="middle" fill="#666">Create assignment</text>
    
    <line x1="200" y1="510" x2="270" y2="510" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="235" y="500" font-size="10" text-anchor="middle" fill="#d32f2f">POST + JWT</text>
    
    <rect x="270" y="470" width="180" height="80" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5"/>
    <text x="360" y="495" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">Middleware</text>
    <text x="360" y="512" font-size="10" text-anchor="middle" fill="#424242">1. Verify JWT</text>
    <text x="360" y="527" font-size="10" text-anchor="middle" fill="#424242">2. Check role=teacher</text>
    <text x="360" y="542" font-size="10" text-anchor="middle" fill="#424242">3. Pass to controller</text>
    
    <line x1="450" y1="510" x2="520" y2="510" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    
    <rect x="520" y="470" width="150" height="80" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
    <text x="595" y="500" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">Database</text>
    <text x="595" y="517" font-size="11" text-anchor="middle" fill="#424242">INSERT assignment</text>
    <text x="595" y="535" font-size="10" text-anchor="middle" fill="#666">with teacher_id</text>
  </g>
  
  <!-- Student Submission Flow -->
  <g id="submission-flow">
    <text x="200" y="610" font-size="20" font-weight="bold" fill="#c62828">
      4. Student Flow - Submit Assignment
    </text>
    
    <rect x="50" y="630" width="150" height="100" fill="#ffebee" stroke="#c62828" stroke-width="2" rx="5"/>
    <text x="125" y="655" font-size="14" font-weight="bold" text-anchor="middle" fill="#b71c1c">Student</text>
    <text x="125" y="672" font-size="11" text-anchor="middle" fill="#424242">/dashboard</text>
    <text x="125" y="695" font-size="10" text-anchor="middle" fill="#666">Select assignment</text>
    <text x="125" y="710" font-size="10" text-anchor="middle" fill="#666">Upload file</text>
    
    <line x1="200" y1="680" x2="270" y2="680" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="235" y="670" font-size="10" text-anchor="middle" fill="#d32f2f">FormData</text>
    
    <rect x="270" y="630" width="180" height="100" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5"/>
    <text x="360" y="655" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">Backend</text>
    <text x="360" y="672" font-size="10" text-anchor="middle" fill="#424242">1. Verify JWT</text>
    <text x="360" y="687" font-size="10" text-anchor="middle" fill="#424242">2. Check role=student</text>
    <text x="360" y="702" font-size="10" text-anchor="middle" fill="#424242">3. Multer saves file</text>
    <text x="360" y="717" font-size="10" text-anchor="middle" fill="#424242">4. Create submission</text>
    
    <line x1="450" y1="680" x2="520" y2="680" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    
    <rect x="520" y="630" width="150" height="100" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
    <text x="595" y="665" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">Database</text>
    <text x="595" y="682" font-size="11" text-anchor="middle" fill="#424242">INSERT submission</text>
    <text x="595" y="700" font-size="10" text-anchor="middle" fill="#666">student_id</text>
    <text x="595" y="715" font-size="10" text-anchor="middle" fill="#666">assignment_id</text>
    
    <rect x="720" y="640" width="150" height="80" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="5"/>
    <text x="795" y="670" font-size="14" font-weight="bold" text-anchor="middle" fill="#4a148c">File Storage</text>
    <text x="795" y="687" font-size="11" text-anchor="middle" fill="#424242">/uploads/</text>
    <text x="795" y="705" font-size="10" text-anchor="middle" fill="#666">timestamp-file.pdf</text>
    
    <line x1="670" y1="680" x2="720" y2="680" stroke="#7b1fa2" stroke-width="2" marker-end="url(#arrow)"/>
  </g>
  
  <!-- Grading Flow -->
  <g id="grading-flow">
    <text x="200" y="790" font-size="20" font-weight="bold" fill="#00695c">
      5. Teacher Flow - Grade Submission
    </text>
    
    <rect x="50" y="810" width="150" height="100" fill="#e0f2f1" stroke="#00695c" stroke-width="2" rx="5"/>
    <text x="125" y="835" font-size="14" font-weight="bold" text-anchor="middle" fill="#004d40">Teacher</text>
    <text x="125" y="852" font-size="11" text-anchor="middle" fill="#424242">/dashboard</text>
    <text x="125" y="875" font-size="10" text-anchor="middle" fill="#666">View submissions</text>
    <text x="125" y="890" font-size="10" text-anchor="middle" fill="#666">Enter grade</text>
    
    <line x1="200" y1="860" x2="270" y2="860" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="235" y="850" font-size="10" text-anchor="middle" fill="#d32f2f">PATCH</text>
    
    <rect x="270" y="810" width="180" height="100" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5"/>
    <text x="360" y="835" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">Backend</text>
    <text x="360" y="852" font-size="10" text-anchor="middle" fill="#424242">1. Verify JWT</text>
    <text x="360" y="867" font-size="10" text-anchor="middle" fill="#424242">2. Check ownership</text>
    <text x="360" y="882" font-size="10" text-anchor="middle" fill="#424242">3. Validate grade</text>
    <text x="360" y="897" font-size="10" text-anchor="middle" fill="#424242">4. Update submission</text>
    
    <line x1="450" y1="860" x2="520" y2="860" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    
    <rect x="520" y="810" width="150" height="100" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
    <text x="595" y="845" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">Database</text>
    <text x="595" y="862" font-size="11" text-anchor="middle" fill="#424242">UPDATE submission</text>
    <text x="595" y="880" font-size="10" text-anchor="middle" fill="#666">SET grade = ?</text>
    <text x="595" y="895" font-size="10" text-anchor="middle" fill="#666">SET feedback = ?</text>
    
    <line x1="520" y1="870" x2="450" y2="870" stroke="#388e3c" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="270" y1="875" x2="200" y2="875" stroke="#1976d2" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="125" y="930" font-size="10" text-anchor="middle" fill="#00695c">Display updated grade</text>
  </g>
  
  <!-- Role-Based Access Matrix -->
  <g id="rbac-matrix">
    <text x="1050" y="90" font-size="20" font-weight="bold" text-anchor="middle" fill="#d32f2f">
      Role-Based Access Control
    </text>
    
    <rect x="800" y="110" width="500" height="280" fill="#fff" stroke="#333" stroke-width="2" rx="8"/>
    
    <!-- Table Header -->
    <rect x="810" y="120" width="200" height="30" fill="#1976d2"/>
    <text x="910" y="140" font-size="14" font-weight="bold" text-anchor="middle" fill="#fff">Action</text>
    
    <rect x="1010" y="120" width="135" height="30" fill="#7b1fa2"/>
    <text x="1077" y="140" font-size="14" font-weight="bold" text-anchor="middle" fill="#fff">Teacher</text>
    
    <rect x="1145" y="120" width="145" height="30" fill="#c62828"/>
    <text x="1217" y="140" font-size="14" font-weight="bold" text-anchor="middle" fill="#fff">Student</text>
    
    <!-- Rows -->
    <text x="820" y="170" font-size="12" fill="#424242">Create Assignment</text>
    <text x="1077" y="170" font-size="16" text-anchor="middle" fill="#2e7d32">✓</text>
    <text x="1217" y="170" font-size="16" text-anchor="middle" fill="#c62828">✗</text>
    
    <rect x="810" y="175" width="480" height="1" fill="#e0e0e0"/>
    
    <text x="820" y="195" font-size="12" fill="#424242">View All Assignments</text>
    <text x="1077" y="195" font-size="16" text-anchor="middle" fill="#2e7d32">✓</text>
    <text x="1217" y="195" font-size="16" text-anchor="middle" fill="#2e7d32">✓</text>
    
    <rect x="810" y="200" width="480" height="1" fill="#e0e0e0"/>
    
    <text x="820" y="220" font-size="12" fill="#424242">Edit/Delete Assignment</text>
    <text x="1077" y="220" font-size="16" text-anchor="middle" fill="#2e7d32">✓ (own)</text>
    <text x="1217" y="220" font-size="16" text-anchor="middle" fill="#c62828">✗</text>
    
    <rect x="810" y="225" width="480" height="1" fill="#e0e0e0"/>
    
    <text x="820" y="245" font-size="12" fill="#424242">Submit Assignment</text>
    <text x="1077" y="245" font-size="16" text-anchor="middle" fill="#c62828">✗</text>
    <text x="1217" y="245" font-size="16" text-anchor="middle" fill="#2e7d32">✓</text>
    
    <rect x="810" y="250" width="480" height="1" fill="#e0e0e0"/>
    
    <text x="820" y="270" font-size="12" fill="#424242">View Submissions</text>
    <text x="1077" y="270" font-size="16" text-anchor="middle" fill="#2e7d32">✓ (all)</text>
    <text x="1217" y="270" font-size="16" text-anchor="middle" fill="#2e7d32">✓ (own)</text>
    
    <rect x="810" y="275" width="480" height="1" fill="#e0e0e0"/>
    
    <text x="820" y="295" font-size="12" fill="#424242">Grade Submission</text>
    <text x="1077" y="295" font-size="16" text-anchor="middle" fill="#2e7d32">✓</text>
    <text x="1217" y="295" font-size="16" text-anchor="middle" fill="#c62828">✗</text>
    
    <rect x="810" y="300" width="480" height="1" fill="#e0e0e0"/>
    
    <text x="820" y="320" font-size="12" fill="#424242">View Grades</text>
    <text x="1077" y="320" font-size="16" text-anchor="middle" fill="#2e7d32">✓ (all)</text>
    <text x="1217" y="320" font-size="16" text-anchor="middle" fill="#2e7d32">✓ (own)</text>
    
    <rect x="810" y="325" width="480" height="1" fill="#e0e0e0"/>
    
    <text x="820" y="345" font-size="12" fill="#424242">Provide Feedback</text>
    <text x="1077" y="345" font-size="16" text-anchor="middle" fill="#2e7d32">✓</text>
    <text x="1217" y="345" font-size="16" text-anchor="middle" fill="#c62828">✗</text>
  </g>
  
  <!-- Security Features Box -->
  <g id="security-box">
    <text x="1050" y="430" font-size="20" font-weight="bold" text-anchor="middle" fill="#f57c00">
      Security Features
    </text>
    
    <rect x="800" y="450" width="500" height="250" fill="#fff8e1" stroke="#f57c00" stroke-width="2" rx="8"/>
    
    <text x="820" y="480" font-size="14" font-weight="bold" fill="#e65100">Authentication</text>
    <text x="830" y="500" font-size="12" fill="#424242">• JWT tokens (2-hour expiry)</text>
    <text x="830" y="518" font-size="12" fill="#424242">• Bcrypt password hashing (10 rounds)</text>
    <text x="830" y="536" font-size="12" fill="#424242">• Token validation on every request</text>
    
    <text x="820" y="565" font-size="14" font-weight="bold" fill="#e65100">Authorization</text>
    <text x="830" y="585" font-size="12" fill="#424242">• Role-based access control (RBAC)</text>
    <text x="830" y="603" font-size="12" fill="#424242">• Ownership verification for resources</text>
    <text x="830" y="621" font-size="12" fill="#424242">• Middleware chain validation</text>
    
    <text x="820" y="650" font-size="14" font-weight="bold" fill="#e65100">Data Protection</text>
    <text x="830" y="670" font-size="12" fill="#424242">• Helmet.js security headers</text>
    <text x="830" y="688" font-size="12" fill="#424242">• CORS policy enforcement</text>
    
    <rect x="810" y="455" width="480" height="240" fill="none" stroke="#ffa726" stroke-width="1" stroke-dasharray="5,5" rx="5"/>
  </g>
  
  <!-- Technology Stack -->
  <g id="tech-stack">
    <text x="1050" y="750" font-size="20" font-weight="bold" text-anchor="middle" fill="#1976d2">
      Technology Stack
    </text>
    
    <rect x="800" y="770" width="240" height="180" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="8"/>
    <text x="920" y="795" font-size="14" font-weight="bold" text-anchor="middle" fill="#0d47a1">Frontend</text>
    <text x="815" y="815" font-size="11" fill="#424242">• Next.js 14 (App Router)</text>
    <text x="815" y="833" font-size="11" fill="#424242">• React 18.3</text>
    <text x="815" y="851" font-size="11" fill="#424242">• TypeScript 5.6</text>
    <text x="815" y="869" font-size="11" fill="#424242">• Tailwind CSS 3.4</text>
    <text x="815" y="887" font-size="11" fill="#424242">• Context API</text>
    <text x="815" y="905" font-size="11" fill="#424242">• Server & Client Components</text>
    <text x="815" y="923" font-size="11" fill="#424242">• Responsive Design</text>
    
    <rect x="1055" y="770" width="240" height="180" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="8"/>
    <text x="1175" y="795" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">Backend</text>
    <text x="1070" y="815" font-size="11" fill="#424242">• Node.js 18+</text>
    <text x="1070" y="833" font-size="11" fill="#424242">• Express.js 5.1</text>
    <text x="1070" y="851" font-size="11" fill="#424242">• Sequelize ORM 6.37</text>
    <text x="1070" y="869" font-size="11" fill="#424242">• MySQL 8.0+</text>
    <text x="1070" y="887" font-size="11" fill="#424242">• JWT (jsonwebtoken 9.0)</text>
    <text x="1070" y="905" font-size="11" fill="#424242">• Bcrypt 6.0</text>
    <text x="1070" y="923" font-size="11" fill="#424242">• Multer (File Uploads)</text>
  </g>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Footer -->
  <text x="700" y="980" font-size="12" font-style="italic" text-anchor="middle" fill="#666">
    EduTrack MVP - Full-Stack Classroom Management System
  </text>
</svg>
